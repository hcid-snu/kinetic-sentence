<!DOCTYPE html>
<meta charset="utf-8">
<body>
<script src="lib/d3/d3.js"></script>
<script src="lib/d3/d3.layout.cloud.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js"></script>
<script>
  var fill = d3.scale.category20();
  var words = ["Zero","oooooone", "twooo", "three", "four", "five", 
  "six", "seven", "eeeight","nine", "ten", "eleven", "twelve", "thirteen", 
  "fourteen", "fifteen"]/*[
        "Lorem","ipsum","dolor","sit","amet,","consectetur","adipisicing",
        "elit","sed","do","eiusmod","tempor","incididunt","ut","labore",
        "et","dolore","magna","aliqua"];
        */
  d3.layout.cloud().size([1000, 600])
      .words(words.map(function(d) {
        return {text: d, size: 18 + Math.random() * 64};
      }))
      .padding(0)
      .rotate(function() { return 0;/*~~(Math.random() * 2) * 90;*/ })
      .font("Impact")
      .fontSize(function(d) { return d.size; })
      .spiral(newRectangularSpiral)
      .on("end", draw)
      .start();

  function linearSpiral(size) {
    var dy = 4,
        dx = dy * size[0] / size[1];
        x = 0;
        y = 0;
    return function(t) {
      x += dx *t;
      y += dy *t;
      return [x,y];
    };
    /*
    noise(t)
    x = noise(t) % width
    y = noise(t) / width
    */
  }

  function newRectangularSpiral(size) {
    var dy = 2,
        dx = dy * size[0] / size[1] * 2.5 , // width/height * dy
        x = 0,
        y = 0;
    return function(t) {
      var sign = t < 0 ? -1 : 1;
      // See triangular numbers: T_n = n * (n + 1) / 2.
      switch ((Math.sqrt(1 + 4 * sign * t) - sign) & 3) {
        case 0:  x += dx; break;
        case 1:  y += dy; break;
        case 2:  x -= dx; break;
        default: y -= dy; break;
      }
      return [x, y];
    };
  }


  function quarterArchimedeanSpiral(size) {
    var e = size[0] / size[1];
    return function(t) {
      //var theta = t % (2*Math.PI);
      //t = t % (2*Math.PI);
      //theta = Math.max(Math.min(Math.PI*0.1, theta), Math.PI*0.35);
      return [Math.abs(e * (t *= .1) * Math.cos(t)), Math.abs(t * Math.sin(t))];
    };
  }

  
  function rectangularSpiral(size) {
    var dy = 4,
        dx = dy * size[0] / size[1], // width/height * dy
        x = 0,
        y = 0;
    return function(t) {
      var sign = t < 0 ? -1 : 1;
      // See triangular numbers: T_n = n * (n + 1) / 2.
      switch ((Math.sqrt(1 + 4 * sign * t) - sign) & 3) {
        case 0:  x += dx; break;
        case 1:  y += dy; break;
        case 2:  x -= dx; break;
        default: y -= dy; break;
      }
      return [x, y];
    };
  }

  function archimedeanSpiral(size) {
    var e = size[0] / size[1];
    return function(t) {
      return [e * (t *= .1) * Math.cos(t), t * Math.sin(t)];
    };
  }

  function draw(words) {
    d3.select("body").append("svg")
        .attr("width", 800)
        .attr("height", 600)
      .append("g")
        .attr("transform", "translate(500,300)")
      .selectAll("text")
        .data(words)
      .enter().append("text")
        .attr("class", function(d,i) {return "word " + i;})
        
        .style("font-family", "Impact")
        .style("fill", function(d, i) { return fill(i); })
        .attr("text-anchor", "middle")
        .attr("transform", function(d) {
          return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
        })
        .text(function(d) { return d.text; })
        .style("opacity", 0)
        .transition()
        .style("opacity",1.0)
        .style("font-size", function(d) { return d.size + "px"; })
        .duration(1000) // this is 1s
        .delay(function(d,i) {return i*100}); 
  }
</script>
